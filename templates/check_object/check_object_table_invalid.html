{% load check_object_filter %}
<table class="table table-bordered table-striped table-hover">
    <thead>
    <tr>
        <th colspan="8">已删对象<span class="badge">{{ results_page.paginator.count }}</span></th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <th>照片</th>
        <th>妻子姓名<br>身份证号</th>
        <th>服务区域<br>单位部门</th>
        <th>丈夫姓名<br>身份证号</th>
        <th>服务区域<br>单位部门</th>
        <th>删除原因<br>更新时间</th>
        <th>避孕措施<br>实施时间</th>
        {% if perms.department.co_delete %}
            <th>恢复命令</th>
        {% endif %}
    </tr>
    {% for result in results_page.object_list %}
        <tr>
            <td class="col-xs-1"><a class="thumbnail" href="{{ result.get_absolute_url }}"><img src="{{ result.photo.url }}" width="47" height="41"/></a>
            </td>
            <td class="col-xs-1">{% if result.is_family %}{{ result.name }}(家属){% else %}
                {{ result.name }}{% endif %}<br><a href="{{ result.get_absolute_url }}">{{ result.id_number }}</a></td>
            <td class="col-xs-2">{{ result.service_area_department.service_area.name }}
            <br>{{ result.service_area_department.department.name }}</td>
            <td class="col-xs-1">{{ result.mate_name }}<br>{{ result.mate_id_number }}</td>
            <td class="col-xs-2">{{ result.mate_service_area_department.service_area.name }}
            <br>{{ result.mate_service_area_department.department.name }}</td>
            <td class="col-xs-2">{{ result.del_reason|del_reason_local }}<br>{{ result.updated_at|date:"Y-m-d H:i:s" }}</td>
            <td class="col-xs-1">{{ result.ctp_method|ctp_local }}<br>{{ result.ctp_method_time|date:"Y-m-d" }}</td>
            {% if perms.department.co_delete %}
                <td class="col-xs-2">
                    <form method="post" action="#">{% csrf_token %}
                        <input type="hidden" name="id" value="{{ result.id }}"/>
                        <button type="submit" value="恢复" name="submit" class="btn btn-success btn-block">恢复</button>
                    </form>
                </td>
            {% endif %}


        </tr>
    {% empty %}
        <div class="alert alert-danger">
            <p>没有已删对象可以查询！</p>
        </div>
    {% endfor %}
    </tbody>
</table>

<ul class="pagination">
    <li class="{% if results_page.has_previous %} active {% else %} disabled {% endif %}">
        <a href="{% url check_object_invalid results_page.previous_page_number %}">上一页</a>
    </li>
    <li class="disabled"><a href="#">第 {{ results_page.number }}/{{ results_page.paginator.num_pages }} 页<span
            class="sr-only">(current)</span></a></li>
    <li class="{% if results_page.has_next %} active {% else %} disabled {% endif %}">
        <a href="{% url check_object_invalid results_page.next_page_number %}">下一页</a>
    </li>
</ul>