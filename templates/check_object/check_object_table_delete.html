{% load check_object_filter %}
<table class="table table-bordered table-striped table-hover">
    <thead>
    <tr>
        <th colspan="7">检查对象<span class="badge">{{ results_page.paginator.count }}</span></th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <th>照片</th>
        <th>妻子姓名<br>身份证号</th>
        <th>服务区域<br>单位部门</th>
        <th>丈夫姓名<br>身份证号</th>
        <th>服务区域<br>单位部门</th>
        <th>删除原因</th>
        <!-- <th scope="col">避孕措施<br>实施时间</th> -->
        <th>删除命令</th>
    </tr>
    {% for result in results_page.object_list %}
        <tr>
            <td><a class="thumbnail" href="{{ result.get_absolute_url }}"><img src="{{ result.thumbnail.url }}" width="47"
                                                             height="41"/></a></td>
            <td>{{ result.name }}<br><a href="{{ result.get_absolute_url }}">{{ result.id_number }}</a></td>
            <td>{{ result.service_area_department.service_area.name }}
            <br>{{ result.service_area_department.department.name }}</td>
            <td>{{ result.mate_name }}<br>{{ result.mate_id_number }}</td>
            <td>{{ result.mate_service_area_department.service_area.name }}
            <br>{{ result.mate_service_area_department.department.name }}</td>
            <!-- <td>{% if result.is_family %}是{% else %}否{% endif %}<br>{{ result.wedding_time|date:"Y-m-d" }}</td> -->
            {% with delete_form as form %}
                <form method="post" action="#">{% csrf_token %}
                    <td>
                        <div class="form-group {% if form.del_reason.errors %} has-error {% endif %}">
                            {{ form.del_reason }}
                            {% if form.del_reason.errors %}
                                {% for error in form.del_reason.errors %}
                                    <span class="help-block badge">{{ error }}</span>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </td>
                    <td>
                        <input type="hidden" name="id" value="{{ result.id }}"/>
                        <button type="submit" value="删除" name="submit" class="btn btn-primary">删除</button>
                    </td>
                </form>
            {% endwith %}
        </tr>
    {% empty %}
        <p class="lead">没有检查对象可以删除！</p>
    {% endfor %}
    </tbody>
</table>

<ul class="pagination">
    <li class="{% if results_page.has_previous %} active {% else %} disabled {% endif %}">
        <a href="{% url check_object_delete results_page.previous_page_number %}">上一页</a>
    </li>
    <li class="disabled"><a href="#">第 {{ results_page.number }}/{{ results_page.paginator.num_pages }} 页<span
            class="sr-only">(current)</span></a></li>
    <li class="{% if results_page.has_next %} active {% else %} disabled {% endif %}">
        <a href="{% url check_object_delete results_page.next_page_number %}">下一页</a>
    </li>
</ul>